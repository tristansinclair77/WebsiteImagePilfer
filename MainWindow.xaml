<Window x:Class="WebsiteImagePilfer.MainWindow"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:WebsiteImagePilfer"
      mc:Ignorable="d"
     Title="Website Image Pilfer" Height="600" Width="900">
  <Window.Resources>
   <local:ListViewIndexConverter x:Key="IndexConverter"/>
    </Window.Resources>
  <Grid Margin="10">
     <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
     <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>
  
      <!-- URL Input Row -->
  <Grid Grid.Row="0" Margin="0,0,0,10">
       <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
  <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
    
  <TextBox x:Name="UrlTextBox" 
        Grid.Column="0"
    Height="30" 
  VerticalContentAlignment="Center"
    Padding="5"
   Margin="0,0,10,0"
Text="https://example.com"/>
      
   <Button x:Name="ScanOnlyButton" 
     Grid.Column="1"
    Content="Scan" 
     Width="80" 
        Height="30"
       Margin="0,0,5,0"
Click="ScanOnlyButton_Click"/>

   <CheckBox x:Name="FastScanCheckBox"
             Grid.Column="2"
 Content="Fast"
     VerticalAlignment="Center"
             Margin="0,0,10,0"
       ToolTip="Fast: Quick scan (5s wait)&#x0a;Unchecked: Thorough scan (waits for all lazy-loaded images)"/>
  
   <Button x:Name="DownloadButton" 
Grid.Column="3"
  Content="Download" 
     Width="100" 
      Height="30"
       Margin="0,0,5,0"
         IsEnabled="False"
Click="DownloadButton_Click"
        ToolTip="Download all ready images"/>
  
  <Button x:Name="DownloadSelectedButton" 
    Grid.Column="4"
         Content="Download Selected" 
   Width="130" 
   Height="30"
     Margin="0,0,5,0"
    IsEnabled="False"
    Click="DownloadSelectedButton_Click"
  ToolTip="Download only selected images"/>
  
    <Button x:Name="CancelButton" 
     Grid.Column="5"
    Content="Cancel" 
         Width="80" 
       Height="30"
  IsEnabled="False"
Click="CancelButton_Click"/>
     </Grid>
   
        <!-- Progress Bar -->
    <ProgressBar x:Name="DownloadProgress" 
     Grid.Row="1"
     Height="20" 
  Margin="0,0,0,10"
         Minimum="0"
       Maximum="100"
       Value="0"/>
        
        <!-- Folder Selection -->
     <Grid Grid.Row="2" Margin="0,0,0,10">
     <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="Auto"/>
<ColumnDefinition Width="Auto"/>
   <ColumnDefinition Width="Auto"/>
   </Grid.ColumnDefinitions>
     
       <TextBlock Grid.Column="0" 
   Text="Save to:" 
     VerticalAlignment="Center"
 Margin="0,0,10,0"/>
      
        <TextBox x:Name="FolderTextBox" 
      Grid.Column="1"
  Height="25"
   VerticalContentAlignment="Center"
Padding="5"
  Margin="0,0,10,0"
IsReadOnly="True"/>
      
 <Button x:Name="BrowseButton" 
     Grid.Column="2"
   Content="Browse..." 
 Width="80"
  Height="25"
         Margin="0,0,5,0"
  Click="BrowseButton_Click"/>

    <Button x:Name="NewFolderButton" 
         Grid.Column="3"
    Content="New Folder" 
       Width="80"
   Height="25"
     Margin="0,0,5,0"
    Click="NewFolderButton_Click"
          ToolTip="Create a new folder in the current location"/>

    <Button x:Name="OpenFolderButton" 
         Grid.Column="4"
    Content="Open Folder" 
         Width="80"
   Height="25"
     Margin="0,0,5,0"
  Click="OpenFolderButton_Click"
              ToolTip="Open the download folder in File Explorer"/>
    
         <Button x:Name="SettingsButton" 
  Grid.Column="5"
    Content="Settings..." 
 Width="80"
    Height="25"
  Click="SettingsButton_Click"/>
</Grid>
      
   <!-- Image List -->
        <ListView x:Name="ImageList" 
   Grid.Row="3"
     Margin="0,0,0,10"
    SelectionMode="Extended"
    SelectionChanged="ImageList_SelectionChanged"
  MouseDoubleClick="ImageList_MouseDoubleClick">
     <ListView.ContextMenu>
        <ContextMenu>
        <MenuItem Header="Download (Force)" Click="ContextMenu_Download_Click" />
 <MenuItem Header="Reload Preview" Click="ContextMenu_ReloadPreview_Click" />
       <Separator />
        <MenuItem Header="Cancel Download" Click="ContextMenu_Cancel_Click" />
            </ContextMenu>
          </ListView.ContextMenu>
   <ListView.View>
     <GridView>
 <GridViewColumn Header="#" Width="40">
  <GridViewColumn.CellTemplate>
       <DataTemplate>
        <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, 
       Converter={StaticResource IndexConverter}}"
          HorizontalAlignment="Center"/>
           </DataTemplate>
    </GridViewColumn.CellTemplate>
      </GridViewColumn>
       <GridViewColumn x:Name="PreviewColumn" Header="Preview" Width="150">
   <GridViewColumn.CellTemplate>
    <DataTemplate>
 <Image Source="{Binding PreviewImage}" 
  MaxWidth="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType=GridViewColumn}}" 
 Stretch="Uniform"
  Margin="2"
  HorizontalAlignment="Center"
  VerticalAlignment="Center"
        RenderOptions.BitmapScalingMode="Fant"
            UseLayoutRounding="True"
SnapsToDevicePixels="True"/>
  </DataTemplate>
 </GridViewColumn.CellTemplate>
     </GridViewColumn>
        <GridViewColumn Header="Status" Width="80">
     <GridViewColumn.CellTemplate>
    <DataTemplate>
    <TextBlock Text="{Binding Status}"/>
  </DataTemplate>
        </GridViewColumn.CellTemplate>
       </GridViewColumn>
     <GridViewColumn Header="Image URL" Width="320">
  <GridViewColumn.CellTemplate>
   <DataTemplate>
   <TextBlock Text="{Binding Url}" TextTrimming="CharacterEllipsis" ToolTip="{Binding Url}"/>
 </DataTemplate>
 </GridViewColumn.CellTemplate>
           </GridViewColumn>
    <GridViewColumn Header="Filename" Width="150">
     <GridViewColumn.CellTemplate>
   <DataTemplate>
<TextBlock Text="{Binding FileName}"/>
   </DataTemplate>
  </GridViewColumn.CellTemplate>
      </GridViewColumn>
 <GridViewColumn Header="Error" Width="280">
   <GridViewColumn.CellTemplate>
        <DataTemplate>
        <TextBlock Text="{Binding ErrorMessage}" 
   Foreground="Red"
TextTrimming="CharacterEllipsis" 
 ToolTip="{Binding ErrorMessage}"/>
    </DataTemplate>
    </GridViewColumn.CellTemplate>
     </GridViewColumn>
      </GridView>
   </ListView.View>
     </ListView>

     <!-- Pagination Controls -->
    <Grid Grid.Row="4" Height="30" Margin="0,0,0,5">
    <Grid.ColumnDefinitions>
     <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="Auto"/>
  <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>
            
            <Button x:Name="PrevPageButton" 
           Grid.Column="1"
         Content="◄ Previous" 
           Width="80" 
           Height="25"
      Margin="0,0,10,0"
      Click="PrevPageButton_Click"
         IsEnabled="False"/>
  
            <TextBlock x:Name="PageInfoText"
            Grid.Column="2"
       Text="Page 1 of 1"
        VerticalAlignment="Center"
              HorizontalAlignment="Center"
         MinWidth="100"
         TextAlignment="Center"
          Margin="10,0,10,0"/>
            
 <Button x:Name="NextPageButton" 
           Grid.Column="3"
     Content="Next ►" 
  Width="80" 
      Height="25"
           Margin="10,0,0,0"
      Click="NextPageButton_Click"
      IsEnabled="False"/>
        </Grid>
        
     <!-- Status Bar -->
    <StatusBar Grid.Row="5" Height="25">
    <StatusBarItem>
  <TextBlock x:Name="StatusText" Text="Ready"/>
   </StatusBarItem>
    </StatusBar>
  </Grid>
</Window>
